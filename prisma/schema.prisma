// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:postgres@localhost:5432/app" // hardcoded because it's an internal docker connection
}

model ContactSubmission {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  name        String
  email       String
  phone       String?
  inquiryType String   // 'buy', 'sell', 'rent', 'other'
  message     String
  isRead      Boolean  @default(false)
}

model BlogPost {
  id           Int      @id @default(autoincrement())
  createdAt    DateTime @default(now())
  slug         String   @unique
  titleEn      String
  titleZh      String
  keywords     String
  category     String   // 'buying-tips', 'selling-strategies', 'market-insights', 'investment-guide', 'property-management', 'financing-loans'
  publishDate  DateTime
  contentEn    String   @db.Text
  contentZh    String   @db.Text
  excerptEn    String
  excerptZh    String
  thumbnailUrl String?
  headerImage  String?
}

model Video {
  id            Int      @id @default(autoincrement())
  createdAt     DateTime @default(now())
  titleEn       String
  titleZh       String
  videoUrl      String   @unique
  category      String   // 'buying', 'selling', 'tips'
  coverImageUrl String
  duration      String   // e.g., "14:17"
  views         String   // e.g., "11K views"
  displayOrder  Int      @default(0)

  @@index([category, displayOrder])
}

model TrafficLog {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  visitorId   String   // Anonymous visitor ID
  country     String?  // Country from geoIP
  region      String?  // Region/state from geoIP
  city        String?  // City from geoIP
  page        String   // Page URL visited

  @@index([createdAt])
  @@index([visitorId])
}
